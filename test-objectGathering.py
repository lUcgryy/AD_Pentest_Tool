import ldap3
import sys
def getAllUsers(self, attributes=''):
        if not attributes:
            attributes = ['*']

        search_filter = '(objectCategory=user)'
        base_dn = self.domain_base
        try:
            rawuser = self.do_ldap_query(base_dn,search_filter,attributes)
        except ldap3.core.exceptions.LDAPExceptionError as e:
            print("[!] Error retrieving users")
            print("[!] {}".format(e))
            sys.exit(1)

    return self.do_ldap_query()